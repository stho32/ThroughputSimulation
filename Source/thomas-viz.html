<!doctype html>

<meta charset="utf-8">
<title>Visualization, Thomas approach</title>

<link rel="stylesheet" href="demo.css">
<script src="js/d3.v4.js" charset="utf-8"></script>
<script src="js/dagre-d3.js"></script>
<script src="js/thomas.js"></script>

<h1>Visualization, Thomas approach</h1>

<style id="css">
/* This sets the color for "TK" nodes to a light blue green. */
g.type-TK > rect {
  fill: #00ffd0;
}

text {
  font-weight: 300;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-size: 14px;
}

.node rect {
  stroke: #999;
  fill: #fff;
  stroke-width: 1.5px;
}

.edgePath path {
  stroke: #333;
  stroke-width: 1.5px;
}
</style>

<svg id="svg-canvas" width=960 height=600></svg>

<section>
</section>

<script id="js">
var a = Node("A");
var b = Node("B");
var edge = Edge(3).connect(a,b);
 
var sampleGraph = {
  nodes : [a,b],
  edges : [edge]
};

// Create the input graph
var g = new dagreD3.graphlib.Graph()
  .setGraph({})
  .setDefaultEdgeLabel(function() { return {}; });

// Here we"re setting nodeclass, which is used by our custom drawNodes function
// below.
for (let i = 0; i < sampleGraph.nodes.length; i++) {
  g.setNode(sampleGraph.nodes[i].id,  
    { label: sampleGraph.nodes[i].label,       
      class: "type-TOP" });
}

// Set up edges, no special attributes.
/*
g.setEdge(3, 4);
g.setEdge(2, 3);
g.setEdge(1, 2);
g.setEdge(6, 7);
g.setEdge(5, 6);
g.setEdge(9, 10);
g.setEdge(8, 9);
g.setEdge(11,12);
g.setEdge(8, 11);
g.setEdge(5, 8);
g.setEdge(1, 5);
g.setEdge(13,14);
g.setEdge(1, 13);
g.setEdge(0, 1)
*/
// Create the renderer
var render = new dagreD3.render();

// Set up an SVG group so that we can translate the final graph.
var svg = d3.select("svg"),
    svgGroup = svg.append("g");

// Run the renderer. This is what draws the final graph.
render(d3.select("svg g"), g);

// Center the graph
var xCenterOffset = (svg.attr("width") - g.graph().width) / 2;
svgGroup.attr("transform", "translate(" + xCenterOffset + ", 20)");
svg.attr("height", g.graph().height + 40);
</script>
